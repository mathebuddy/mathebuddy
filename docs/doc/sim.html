<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="" />
  <meta name="dcterms.date" content="2023-02-17" />
  <title>Mathe:Buddy Simulator</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
  </style>
  <link rel="stylesheet" href="doc.css" />
  <script
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js"
  type="text/javascript"></script>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
[<a href="https://mathebuddy.github.io/mathebuddy/">Home</a>] 
[<a href="./mbl.html">MBL Reference</a>] 
[<a href="./smpl.html">SMPL Reference</a>] 
[<a href="./mbcl.html">MBCL Reference</a>] 
[<a href="./sim.html">Installation</a>] 
<h1 class="title">Mathe:Buddy Simulator</h1>
<p class="author"></p>
<p class="date">2023-02-17</p>
</header>
<!-- Mathe:Buddy Simulator -->
<hr />
<p><strong>NOTE</strong></p>
<ul>
<li>This installation guide is in work-in-progress state.</li>
</ul>
<hr />
<hr />
<p><strong>NOTE</strong></p>
<ul>
<li>If you installed mathe:buddy simulator before 2023-01-19, then run
<code>git stash</code> and <code>git pull</code> in Terminal, right
before running <code>python3 server.py</code>. This must be done only
once.</li>
</ul>
<hr />
<p>We provide a web-based simulation environment for the
<code>mathe:buddy</code> app.</p>
<p><img src="img/screenshot.png" /></p>
<h1 id="outline">Outline</h1>
<p>Implementation is ongoing. We plan to release …</p>
<ol type="1">
<li>An interactive <em>Integrated Development Environment (IDE)</em>
that runs in the browser without any software dependencies [Release is
planned for second half of 2023].</li>
<li>Plugins for <em>Visual Studio Code</em> [Release in the market place
is planned for first quarter of 2023].</li>
</ol>
<p>By now, you have to run the simulator on a local computer.
Installation and usage might be challenging - if you are not a
developer, you should wait for the above mentioned releases…</p>
<h1 id="committing-courses">Committing Courses</h1>
<p>Yau are encouraged to use and test our toolchain! We will later allow
anyone to create custom math-courses. .. BE PATIENT FOR THAT!</p>
<h1 id="installation">Installation</h1>
<p>Make sure you got <code>git</code>, <code>python3</code>,
<code>npm</code>, <code>node</code> and <code>pandoc</code> installed on
your system.</p>
<ul>
<li><p>Debian-based Linux:</p>
<pre><code>sudo apt install git python3 nodejs npm pandoc</code></pre></li>
<li><p>macOS: First install <code>homebrew</code> package manager as
described on <a href="https://brew.sh">https://brew.sh</a>. Then run the
following commands in a terminal window:</p>
<pre><code>brew install git python3 node pandoc</code></pre></li>
</ul>
<p>You now need to clone three <em>mathe:buddy</em> repositories.
Replace <code>YOUR_FAVORITE_DIRECTORY</code> by a local directory on
your disk.</p>
<blockquote>
<p>TIP: use <a href="https://desktop.github.com">GitHub Desktop</a> to
clone the repositories (refer to the end of this document).</p>
</blockquote>
<pre><code>cd YOUR_FAVORITE_DIRECTORY
git clone https://github.com/mathebuddy/mathebuddy-simulator.git
git clone https://github.com/mathebuddy/mathebuddy-math-runtime.git
git clone https://github.com/mathebuddy/mathebuddy-compiler.git
git clone https://github.com/mathebuddy/mathebuddy-smpl.git
git clone https://github.com/mathebuddy/mathebuddy-public-courses.git</code></pre>
<p>Developers of the core team should use a SSH key pair; see <a
href="https://docs.github.com/en/authentication/connecting-to-github-with-ssh">https://docs.github.com/en/authentication/connecting-to-github-with-ssh</a>;
and also clone the private repository:</p>
<pre><code>cd YOUR_FAVORITE_DIRECTORY
git clone git@github.com:mathebuddy/mathebuddy-simulator.git
git clone git@github.com:mathebuddy/mathebuddy-math-runtime.git
git clone git@github.com:mathebuddy/mathebuddy-compiler.git
git clone git@github.com:mathebuddy/mathebuddy-smpl.git
git clone git@github.com:mathebuddy/mathebuddy-public-courses.git
git clone git@github.com:mathebuddy/mathebuddy-private-courses.git</code></pre>
<blockquote>
<p>Remark: it is essential that all three repositories are located next
to each other!</p>
</blockquote>
<blockquote>
<p>WARNING: Never(!!) clone to iCloud / GoogleDrive / OneDrive /
NextCloud / Sciebo / …!</p>
</blockquote>
<h1 id="usage">Usage</h1>
<p>Change to directory <code>mathebuddy-simulator</code>:</p>
<pre><code>cd mathebuddy-simulator</code></pre>
<blockquote>
<p>Tip: in macOS you can open the directory
<code>mathebuddy-simulator</code> in the Finder and then open a terminal
window in that location. Open <code>[Finder]</code> <span
class="math inline">\(\to\)</span> <code>[Services]</code> <span
class="math inline">\(\to\)</span>
<code>[New Terminal at Folder]</code>.</p>
</blockquote>
<p>Run <code>server.py</code>:</p>
<pre><code>python3 server.py</code></pre>
<p>The following Read-Eval-Print-Loop (REPL) is provided. Choose a
number and press <code>[ENTER]</code>.</p>
<ol type="1">
<li><strong><code>update</code></strong> [MUST be run first]</li>
</ol>
<ul>
<li>updates the repositories to the latest revisions on GitHub</li>
<li>installs the <code>npm</code> packages from
<code>package.json</code> and compiles the sources.</li>
</ul>
<ol start="2" type="1">
<li><strong><code>make playground</code></strong> [RECOMMENDED!!]</li>
</ol>
<ul>
<li>creates a playground directory in
<code>mathebuddy-public-courses</code>, which is NOT synced.</li>
</ul>
<ol start="3" type="1">
<li><strong><code>start web server</code></strong></li>
</ol>
<ul>
<li><p>starts a web server at port 8314. Open <a
href="http://localhost:8314">http://localhost:8314</a> in your favorite
browser. You should see the contents of screenshot above (“hello world”
will be shown later!)</p></li>
<li><p>Select a file from the dropdown menu. All files with suffix
<code>*.mbl</code> (mathe:buddy language) from repository
<code>mathebuddy-public-courses</code> are listed. Open
<code>../mathebuddy-public-courses/demo-basic/hello.mbl</code> for a
hello world example. The compiler is run automatically and the simulator
renders the result.</p></li>
<li><p>Use radio buttons <code>input</code>, <code>JSON</code> and
<code>HTML</code> to show intermediate results:</p>
<ul>
<li><code>input</code> is the source code of the opened
<code>*.mbl</code> file</li>
<li><code>JSON</code> shows the output of the compiler. This
intermediate language is both used in the simulator, as well as the
app.</li>
<li><code>HTML</code> shows the HTML-code that is shown in the
simulator. This feature is only intended for debugging purposes.</li>
</ul></li>
<li><p>Button <code>refresh file list</code> updates the file list in
the dropdown menu. Should be used in case that you rename / create a
file in <code>mathebuddy-public-courses</code>.</p></li>
<li><p>Button <code>run</code> updates the simulator. Should be used
after editing some of the files in
<code>mathebuddy-public-courses</code>.</p></li>
</ul>
<ol start="4" type="1">
<li><strong><code>kill process at port 8314</code></strong></li>
</ol>
<ul>
<li>normally not needed</li>
<li>in case that the HTTP-server hangs up, this choice stops it</li>
</ul>
<ol start="5" type="1">
<li><strong><code>exit</code></strong></li>
</ol>
<ul>
<li>quits the Python script</li>
</ul>
<h1 id="visual-studio-code-vs-code">Visual Studio Code (VS-Code)</h1>
<p>Files in repository <code>mathebuddy-public-courses</code> can be
edited with a plaintext editor of choice.</p>
<blockquote>
<p>Do <strong>NOT</strong> use M$ Word or LibreOffice to edit files,
since word processors are not outputting plaintext files!</p>
</blockquote>
<p>We suggest do use Visual Studio Code to edit files, since we will
provide a plugin for it in the future anyway. Visit <a
href="https://code.visualstudio.com">https://code.visualstudio.com</a>
for install instructions.</p>
<blockquote>
<p>Tip: On Linux you can install VS-Code via
<code>sudo apt install code</code>. On macOS you can install it via
<code>brew install visual-studio-code</code>.</p>
</blockquote>
<p>Open Visual Studio Code and open repository
<code>mathebuddy-public-courses</code> on your disk.</p>
<blockquote>
<p>WARNING: First start making changes in the playground!!</p>
</blockquote>
<h1 id="committing-changes">Committing Changes</h1>
<blockquote>
<p>WARNING: committing code to the public-course directory is yet only
permitted to the mathe:buddy core team.</p>
</blockquote>
<p>Committing changes can be done on the command line via git:</p>
<pre><code>cd YOUR_DIR/mathebuddy-public-courses
git add --all
git commit -m &quot;YOUR COMMIT MESSAGE HERE&quot;
git push</code></pre>
<h2 id="github-desktop">GitHub Desktop</h2>
<p>GitHub Desktop provides a nice graphical user interface to interact
with GitHub projects (… and also other <code>git</code>-repositories).
Follow the install instructions from <a
href="https://desktop.github.com">https://desktop.github.com</a> and
open GitHub Desktop.</p>
<p>Choose <code>[File]</code> <span class="math inline">\(\to\)</span>
<code>[add local repository]</code> in the main menu and choose
<code>YOUR_DIR/mathebuddy-public-courses</code> on your local disk.</p>
<p>GitHub Desktop will show every current and past change in the
repository.</p>
<h1 id="a-day-in-the-life-of-a-content-creator">A day in the life of a
content creator</h1>
<p>The base installation must only be done once.</p>
<p>Daily procedure:</p>
<ol type="1">
<li>Start <code>server.py</code>: first do the updates and then run the
web-server. Open <code>https://localhost:8314</code> in your favorite
browser.</li>
<li>Open the directory <code>mathebuddy-public-courses</code> in Visual
Studio Code.</li>
<li>Open GitHub Desktop.</li>
<li>Fetch the latest course updates for
<code>mathebuddy-public-courses</code> in GitHub Desktop.</li>
<li>Write courses to explain math to the world.</li>
<li>Debug your courses in the simulator @
<code>https://localhost:8314</code>.</li>
<li>Share your work with GitHub Desktop.</li>
<li>If you are tired, then STOP.</li>
<li>Go to step 4.</li>
</ol>
<p><em>Author: Andreas Schwenk, TH Köln</em></p>
</body>
</html>
