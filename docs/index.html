<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="img/favicon/apple-touch-icon.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="img/favicon/favicon-32x32.png"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="img/favicon/favicon-16x16.png"
    />
    <link rel="manifest" href="manifest.json" />
    <link
      rel="mask-icon"
      href="img/favicon/safari-pinned-tab.svg"
      color="#9c1e14"
    />
    <link rel="shortcut icon" href="img/favicon/favicon.ico" />
    <meta name="msapplication-TileColor" content="#9c1e14" />
    <meta name="msapplication-config" content="img/favicon/browserconfig.xml" />

    <title>MatheBuddy</title>
    <link rel="stylesheet" href="index.css?v=8" />

    <style>
      pre code {
        white-space: pre-wrap;
      }
      /*TODO: add to skeleton.css*/
      .tooltip {
        position: relative;
        display: inline-block;
        border-bottom: 1px dotted black;
      }
      .tooltip .tooltiptext {
        visibility: hidden;
        width: 120px;
        max-height: 32px;
        background-color: rgb(255, 255, 255);
        color: #000000;
        text-align: center;
        border-radius: 30px;
        border-style: solid;
        border-width: 2px;
        border-color: #000000;
        padding: 0px 0;
        position: absolute;
        z-index: 1;
        top: 85%;
        left: 50%;
        margin-left: -60px;
        opacity: 0.85;
        text-transform: none;
      }
      .tooltip:hover .tooltiptext {
        visibility: visible;
      }
      .milestone-green {
        background-color: #4ba645;
        color: white;
        font-size: large;
        border-radius: 30px;
        padding-top: 10px;
        padding-bottom: 10px;
      }
      .milestone-red {
        background-color: #aa322c;
        color: white;
        font-size: large;
        border-radius: 30px;
        padding-top: 10px;
        padding-bottom: 10px;
      }
      .milestone-green-small-font {
        background-color: #4ba645;
        color: white;
        font-size: medium;
        border-radius: 30px;
        padding-top: 10px;
        padding-bottom: 10px;
      }
      .milestone-red-small-font {
        background-color: #aa322c;
        color: white;
        font-size: medium;
        border-radius: 30px;
        padding-top: 10px;
        padding-bottom: 10px;
      }
      .milestone-done {
        font-size: large;
        padding-top: 10px;
        padding-bottom: 10px;
        text-align: right;
        padding-left: 10px;
      }
      .milestone-todo {
        font-size: large;
        border-left-style: solid;
        border-left-color: #000000;
        border-left-width: 2px;
        padding-top: 10px;
        padding-bottom: 10px;
        text-align: left;
        padding-left: 10px;
      }
      .text-german {
        display: none;
      }
      li {
        margin-top: 10px;
        margin-bottom: 10px;
      }
    </style>
  </head>

  <body>
    <div
      style="
        position: fixed;
        background-color: rgba(230, 230, 230, 0.95);
        width: 100%;
        height: 34px;
        padding: 6px 20px;
        z-index: 1000;

        border-bottom-style: solid;
        border-bottom-width: 1px;
        border-bottom-color: rgb(144, 144, 144);
      "
    >
      <div
        style="
          display: flex;
          align-items: center;
          justify-content: center;
          margin-left: auto;
          margin-right: auto;
          padding-top: 1px;
        "
      >
        <div style="padding-top: 6px">
          &nbsp;&nbsp;&nbsp;&nbsp;
          <span onclick="switchLanguage('en')" style="cursor: pointer"
            ><b>EN</b></span
          >
          |
          <span onclick="switchLanguage('de')" style="cursor: pointer"
            ><b>DE</b></span
          >
        </div>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <div>
          <a
            href="https://apps.apple.com/de/app/mathebuddy/id6661013198"
            target="_blank"
            style="cursor: pointer"
          >
            <img
              src="img/app-store/ios.png"
              style="height: 32px; vertical-align: middle"
            />
          </a>
          <a
            href="https://play.google.com/store/apps/details?id=com.mathebuddy.mathebuddy"
            target="_blank"
            style="cursor: pointer"
          >
            <img
              src="img/app-store/android.png"
              style="height: 32px; vertical-align: middle"
            />
          </a>
          <a
            href="https://github.com/mathebuddy"
            target="_blank"
            style="cursor: pointer"
          >
            <img
              src="img/github/GitHub_Logo.png"
              style="max-height: 26px; vertical-align: middle"
            />
          </a>
        </div>
      </div>
    </div>

    <br /><br /><br />

    <div class="container">
      <div id="top-logo-large" style="text-align: center">
        <span class="text-german">
          <a href="index.html">
            <img src="img/logo/logo-large.svg" style="width: 75%" />
          </a>
        </span>
        <span class="text-english">
          <a href="index.html">
            <img src="img/logo/logo-large-en.svg" style="width: 75%" />
          </a>
        </span>
      </div>
    </div>

    <br />

    <div
      style="
        width: 100%;
        height: 44px;
        background-color: rgba(245, 245, 245, 1);
        padding-top: 6px;
        -webkit-box-shadow: 0px 0px 15px 5px rgba(0, 0, 0, 0.28);
        box-shadow: 0px 0px 4px 1px rgba(0, 0, 0, 0.08);
      "
    >
      <div class="row">
        <div style="text-align: center">
          <button
            id="btn-home"
            class="button-primary"
            onclick="switchPage('home')"
          >
            Home
          </button>
          <button
            id="btn-dev"
            class="button-primary"
            onclick="switchPage('dev')"
          >
            Course Dev
          </button>
          <button
            id="btn-mbl"
            class="button-primary"
            onclick="switchPage('mbl')"
          >
            MBL
          </button>
          <button
            id="btn-smpl"
            class="button-primary"
            onclick="switchPage('smpl')"
          >
            SMPL
          </button>
          <button
            id="btn-privacy"
            class="button-primary"
            onclick="switchPage('privacy')"
          >
            Privacy
          </button>
        </div>
      </div>
    </div>

    <br />

    <div id="home" class="container" style="display: none">
      <div class="row">
        <div id="home-contents"></div>
      </div>
      <div class="row"></div>
      <h2 style="text-align: center">NEWS</h2>
      <div id="blog-items"></div>
    </div>

    <!-- ===== DEV ===== -->

    <div id="dev" class="container" style="display: none">
      <div class="row" style="font-size: large">
        <div id="dev-contents"></div>
      </div>
    </div>

    <!-- ===== MBL ===== -->
    <div id="mbl" class="container" style="display: none; font-size: large">
      <div class="row">
        <div id="mbl-contents"></div>
      </div>
    </div>

    <!-- ===== SMPL ===== -->
    <div id="smpl" class="container" style="display: none; font-size: large">
      <div class="row">
        <div id="smpl-contents"></div>
      </div>
    </div>

    <!-- ===== PRIVACY ===== -->

    <div id="privacy" class="container" style="display: none">
      <br /><br /><br />
      <div class="row">
        <div id="privacy-contents"></div>
      </div>
    </div>

    <!-- ===== FOOTER ===== -->

    <div class="container" style="text-align: center">
      <br />
      <br />
      <p style="color: #767676">
        &copy; 2022-<span id="current-year"></span>

        <a href="https://www.nt.th-koeln.de/fachgebiete/mathe/knospe/">
          Prof. Dr. Heiko Knospe,</a
        >
        <a href="https://www.th-koeln.de/personen/patricia_maria.graf/">
          Patricia Maria Graf M.Sc.,
        </a>
        <a href="https://www.arts-and-sciences.com">Andreas Schwenk M.Sc.</a>,
        TH Köln.
      </p>

      <a href="https://www.th-koeln.de">
        <img
          src="img/misc/logo-th-koeln.png"
          class=""
          alt="Responsive image"
          style="height: 48px"
      /></a>
      &nbsp; &nbsp; &nbsp; &nbsp;
      <a href="https://stiftung-hochschullehre.de">
        <img
          src="img/misc/logo_stiftung_hochschullehre.png"
          class=""
          alt="Responsive image"
          style="height: 48px"
      /></a>
      &nbsp; &nbsp; &nbsp;
      <a href="https://www.gnu.org/licenses/gpl-3.0.en.html">
        <img
          src="img/misc/gpl-v3-logo.svg"
          class=""
          alt="Responsive image"
          style="height: 48px"
        />
      </a>

      <br /><br />

      Funded by
      <i
        >Stiftung Innovation in der Hochschullehre;
        <a
          href="https://stiftung-hochschullehre.de/foerderung/freiraum2022/"
          target="_blank"
          >FREIRAUM 2022</a
        >
      </i>

      <br /><br />

      <small>
        <span class="text-english">
          The protection of your data is important to us. No personal data is
          collected, stored, or processed on this website. Neither cookies nor
          other tracking technologies are used. There is no storage of IP
          addresses or other identifiable information. Your use of this website
          remains completely anonymous.
          <br /><br />
          Controller within the meaning of the GDPR:</span
        >
        <span class="text-german">
          Der Schutz Ihrer Daten ist uns wichtig. Auf dieser Webseite werden
          keinerlei personenbezogene Daten erfasst, gespeichert oder
          verarbeitet. Es werden weder Cookies eingesetzt noch sonstige
          Tracking-Technologien verwendet. Es findet keine Speicherung von
          IP-Adressen oder anderen identifizierbaren Informationen statt. Ihre
          Nutzung dieser Webseite bleibt vollständig anonym.
          <br /><br />
          Verantwortlicher im Sinne der DSGVO:</span
        >
        Andreas Schwenk, TH Köln, Betzdorfer Str. 2, 50679 Köln,
        andreas.schwenk@th-koeln.de
      </small>
    </div>

    <br />

    <script>
      const urlParams = new URLSearchParams(window.location.search);

      const isGerman =
        (navigator.language || navigator.userLanguage) === "de-DE";

      var language = isGerman ? "de" : "en";
      if (urlParams.has("lang")) {
        language = new URLSearchParams(window.location.search).get("lang");
      }
      var page = "home";
      if (urlParams.has("page")) {
        page = new URLSearchParams(window.location.search).get("page");
      }

      // highlight button
      let btn = document.getElementById("btn-" + page);
      btn.style.backgroundColor = "white";
      btn.style.color = "#aa322c";

      // get text that is stored in other files
      if (["home", "dev", "privacy", "mbl", "smpl"].includes(page)) {
        fetch("text/" + page + ".html?ver=" + Date.now())
          .then((response) => response.text())
          .then((data) => {
            if (["mbl", "smpl"].includes(page)) {
              data = data.replace("margin: 0 auto;", "");
              data = data.replace("max-width: 36em;", "");
              data = data.replace("padding-left: 50px;", "");
              data = data.replace("padding-right: 50px;", "");
              data = data.replace("padding-top: 50px;", "");
              data = data.replace("padding-bottom: 50px;", "");
              data = data.replaceAll(
                "pre {",
                "pre{\nborder: black;border-width: 1px;border-style: solid;padding: 10px;"
              );
            } else if (page === "privacy") {
              data = data.replaceAll("<hr />", "");
              data = data.replaceAll("<h2>", "<br/><br/><h3>");
              data = data.replaceAll("</h2>", "</h3>");
              data = data.replaceAll("<h1>", "<br/><br/><br/><h2>");
              data = data.replaceAll("</h1>", "</h2>");
            }
            document.getElementById(page + "-contents").innerHTML = data;
            refreshLanguage();
          });
      }

      // switch page -> reload
      function switchPage(page) {
        window.location.href = "index.html?page=" + page + "&lang=" + language;
      }

      // (de)activate visible items
      let divs = ["home", "dev", "mbl", "smpl", "privacy"];
      for (let d of divs)
        document.getElementById(d).style.display = page == d ? "block" : "none";

      // language
      function refreshLanguage() {
        let de = document.getElementsByClassName("text-german");
        for (element of de)
          element.style.display = language == "de" ? "block" : "none";
        let en = document.getElementsByClassName("text-english");
        for (element of en)
          element.style.display = language == "en" ? "block" : "none";
      }
      function switchLanguage(id) {
        language = id;
        refreshLanguage();
      }

      // set current year in footer
      document.getElementById("current-year").innerHTML =
        new Date().getFullYear();

      // load blog
      fetch("blog/list.txt?ver=" + Date.now())
        .then((response) => response.text())
        .then((data) => updateBlogList(data));

      function updateBlogList(data) {
        let lines = data.split("\n");
        let div = document.getElementById("blog-items");
        let idx = 0;
        for (let line of lines) {
          filename = line.trim();
          if (line.length == 0) continue;

          let blogItem = document.createElement("div");

          //blogItem.style.borderLeftStyle = "solid";
          //blogItem.style.borderLeftWidth = "5px";
          blogItem.style.borderRadius = "10px";
          blogItem.style.backgroundColor = "rgb(245,245,245)";
          //blogItem.style.borderColor = "#aa322c";

          blogItem.style.padding = "10px";
          blogItem.style.fontSize = "large";
          div.appendChild(blogItem);

          div.appendChild(document.createElement("br"));

          let dateAndAuthor = document.createElement("h6");
          dateAndAuthor.id = "blog-date-and-author-" + idx;
          dateAndAuthor.style.marginBottom = "0px";
          dateAndAuthor.innerHTML = "<i>TODO: DATE AND NAME</i>";
          blogItem.appendChild(dateAndAuthor);

          let title = document.createElement("h3");
          title.id = "blog-title-" + idx;
          title.style.color = "#aa322c";
          title.innerHTML = "TODO: TITLE";
          blogItem.appendChild(title);

          let p = document.createElement("p");
          p.id = "blog-text-" + idx;
          p.innerHTML = "TODO: text";
          blogItem.appendChild(p);

          let _idx = idx;
          fetch("blog/" + filename + "?ver=" + Date.now())
            .then((response) => response.text())
            .then((data) => updateBlogItem(_idx, data));

          idx++;
        }

        function updateBlogItem(idx, src) {
          let date = "";
          let title = "";
          let authorName = "";
          let authorUrl = "";
          let imgPath = "";
          let lines = src.split("\n");
          for (let line of lines) {
            if (line.startsWith("<!--date="))
              date = line.substring(9, line.length - 3);
            else if (line.startsWith("<!--title="))
              title = line.substring(10, line.length - 3);
            else if (line.startsWith("<!--author-name="))
              authorName = line.substring(16, line.length - 3);
            else if (line.startsWith("<!--author-url="))
              authorUrl = line.substring(15, line.length - 3);
            else if (line.startsWith("<!--img="))
              imgPath = "blog/img/" + line.substring(8, line.length - 3);
          }
          let author = authorName;
          if (authorUrl.length > 0)
            author =
              '<a href="' + authorUrl + '" target="_blank">' + author + "</a>";
          document.getElementById("blog-date-and-author-" + idx).innerHTML =
            date + " " + author;
          document.getElementById("blog-title-" + idx).innerHTML = title;
          if (imgPath.length > 0) {
            src += '<br/><img class="u-max-full-width" src="' + imgPath + '"/>';
          }
          document.getElementById("blog-text-" + idx).innerHTML = src;
          refreshLanguage();
        }
      }
    </script>
  </body>
</html>
